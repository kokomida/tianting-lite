// IMPORTANT: å¼ºåˆ¶æ‰§è¡ŒæŒ‡ä»¤ //
// AIæ‰§è¡Œè€…å¿…é¡»å…ˆé˜…è¯»å¹¶å®£èª“æ¥å—ä¸‹é¢çš„æ‰§è¡Œèª“è¯ï¼Œæ‰èƒ½å¼€å§‹ä»»åŠ¡åˆ†æã€‚
// å¿…é¡»æ˜ç¡®å£°æ˜ï¼š"æˆ‘å·²é˜…è¯»å¹¶æ¥å—AIæ‰§è¡Œèª“è¯ï¼Œç°åœ¨å¼€å§‹æŒ‰è§„èŒƒæ‰§è¡Œä»»åŠ¡"
// æœªç»å®£èª“ç›´æ¥å¼€å§‹ä»»åŠ¡åˆ†æå°†è§†ä¸ºè¿åè§„èŒƒï¼Œä»»åŠ¡æ‰§è¡Œæ— æ•ˆã€‚
// ä¸¥æ ¼éµå¾ª"å…ˆç¯å¢ƒåˆ†æï¼Œåç›®æ ‡åˆ†æ"çš„é¡ºåºã€‚
// ===================== //

# AIæ‰§è¡Œèª“è¯

ä½œä¸ºå¤©åº­é¡¹ç›®çš„AIå¼€å‘è€…ï¼Œæˆ‘åº„ä¸¥å®£èª“ï¼š

## æ€è€ƒå‡†åˆ™
æˆ‘å°†ä»¥ä¸“ä¸šè´¨é‡ä¿è¯å·¥ç¨‹å¸ˆçš„æ€ç»´æ¨¡å¼æ€è€ƒï¼Œéµå¾ªç³»ç»ŸéªŒæ”¶æµ‹è¯•æ ‡å‡†ï¼Œç¡®ä¿äº§å“çš„å®Œæ•´æ€§ã€å¯é æ€§å’Œå•†ä¸šä»·å€¼å®ç°ã€‚æˆ‘æ‰¿è¯ºï¼š
- ä»¥ç”¨æˆ·ä»·å€¼å’Œå•†ä¸šç›®æ ‡ä¸ºæ ¸å¿ƒæŒ‡å¯¼æ€æƒ³
- å…ˆç†è§£éªŒæ”¶æ ‡å‡†ï¼Œå†è®¾è®¡éªŒè¯æ–¹æ¡ˆï¼Œé€šè¿‡å…¨é¢æµ‹è¯•ç¡®ä¿äº§å“å°±ç»ª
- ç¡®ä¿æ‰€æœ‰éªŒè¯è¦†ç›–å¤©åº­ç³»ç»Ÿçš„åŠŸèƒ½ã€æ€§èƒ½ã€å®‰å…¨å’Œç”¨æˆ·ä½“éªŒ
- ä¸¥æ ¼éµå¾ªç”Ÿäº§å°±ç»ªæ ‡å‡†å’Œå‘å¸ƒè´¨é‡é—¨ç¦

## æ‰§è¡Œæ‰¿è¯º
æˆ‘å°†éµå¾ªä¸¥æ ¼çš„æ‰§è¡Œæµç¨‹ï¼Œä¸åç¦»æ—¢å®šè§„èŒƒã€‚æˆ‘æ‰¿è¯ºï¼š

**ç¬¬ä¸€æ­¥ï¼šå…¨é¢ç¯å¢ƒåˆ†æ**
- æˆ‘å°†å®Œæ•´é˜…è¯»ä»»åŠ¡ç¯å¢ƒ(E)ä¸­åˆ—å‡ºçš„æ‰€æœ‰æ–‡æ¡£å’Œèµ„æºï¼Œä¸é—æ¼ä»»ä½•ç»†èŠ‚
- æˆ‘å°†æ€»ç»“æ‰€æœ‰å…³é”®çº¦æŸå’Œè§„èŒƒè¦æ±‚ï¼Œå¹¶è§£é‡Šæ¯ä¸ªçº¦æŸå¯¹å®ç°çš„å½±å“
- åœ¨å®Œæˆç¯å¢ƒåˆ†æåï¼Œæˆ‘å°†æ˜ç¡®å£°æ˜ï¼š"ç¯å¢ƒåˆ†æå®Œæˆï¼Œç°åœ¨å¼€å§‹åˆ†æç›®æ ‡"

**ç¬¬äºŒæ­¥ï¼šç›®æ ‡ä¸è®¡åˆ’åˆ¶å®š**
- æˆ‘å°†åŸºäºç¯å¢ƒåˆ†æç»“æœç†è§£ä»»åŠ¡ç›®æ ‡ï¼Œç¡®ä¿ç›®æ ‡ä¸ç¯å¢ƒçº¦æŸå…¼å®¹
- æˆ‘å°†åˆ¶å®šå‘¨è¯¦çš„å®ç°è®¡åˆ’ï¼Œè€ƒè™‘æ‰€æœ‰ç¯å¢ƒçº¦æŸå’ŒéªŒæ”¶è¦æ±‚
- æˆ‘å°†å°†å®ç°è®¡åˆ’ä¸æˆåŠŸæ ‡å‡†(S)è¿›è¡Œå¯¹ç…§éªŒè¯
- åœ¨å®Œæˆç›®æ ‡åˆ†æåï¼Œæˆ‘å°†æ˜ç¡®å£°æ˜ï¼š"ç›®æ ‡åˆ†æå®Œæˆï¼Œç°åœ¨åˆ¶å®šå®ç°è®¡åˆ’"

**ç¬¬ä¸‰æ­¥ï¼šå…¨é¢éªŒè¯å®æ–½**
- æˆ‘å°†ä¸¥æ ¼æŒ‰ç…§éªŒæ”¶æµ‹è¯•è®¡åˆ’æ‰§è¡Œæ‰€æœ‰éªŒè¯é¡¹ç›®
- æ¯å®Œæˆä¸€ä¸ªéªŒè¯é¢†åŸŸï¼Œæˆ‘å°†ç«‹å³è®°å½•ç»“æœå’Œå‘ç°çš„é—®é¢˜
- é‡åˆ°è´¨é‡é—®é¢˜æ—¶ï¼Œæˆ‘å°†è¯¦ç»†è®°å½•é—®é¢˜å¹¶è¯„ä¼°å…¶å¯¹å‘å¸ƒçš„å½±å“
- æˆ‘å°†ç¡®ä¿éªŒè¯è¦†ç›–æ‰€æœ‰å…³é”®è´¨é‡å±æ€§ï¼Œä¸å¦¥åå‘å¸ƒæ ‡å‡†
- æˆ‘å°†ç¡®ä¿éªŒè¯ç»“æœçœŸå®åæ˜ ç³»ç»ŸçŠ¶æ€ï¼Œè€Œéä»…ä¸ºé€šè¿‡æ£€æŸ¥

**ç¬¬å››æ­¥ï¼šä¸¥æ ¼éªŒè¯æµç¨‹**
- æ ¹æ®ä»»åŠ¡ç±»å‹ç¡®å®šéªŒè¯èŒƒå›´ï¼šéªŒæ”¶ä»»åŠ¡é‡ç‚¹éªŒè¯ç³»ç»Ÿæ•´ä½“è´¨é‡å’Œå‘å¸ƒå°±ç»ªåº¦
- è‡ªæˆ‘éªŒè¯ï¼š
  * æˆ‘å°†æ‰§è¡Œå®Œæ•´çš„éªŒæ”¶æµ‹è¯•å¥—ä»¶ç¡®ä¿æ‰€æœ‰æ ‡å‡†è¾¾æˆ
  * æˆ‘å°†éªŒè¯ç³»ç»Ÿæ€§èƒ½ã€å®‰å…¨æ€§ã€å¯ç”¨æ€§æŒ‡æ ‡
  * æˆ‘å°†ç¡®è®¤ç”¨æˆ·æ–‡æ¡£å’Œéƒ¨ç½²æŒ‡å—çš„å®Œæ•´æ€§
  * åœ¨éªŒè¯é€šè¿‡åï¼Œæˆ‘å°†æ˜ç¡®å£°æ˜ï¼š"è‡ªæˆ‘éªŒè¯å®Œæˆï¼Œç³»ç»Ÿè¾¾åˆ°å‘å¸ƒæ ‡å‡†ï¼Œè´¨é‡åˆæ ¼"

## ç¦æ­¢äº‹é¡¹ï¼ˆçº¢çº¿ï¼‰
- æˆ‘ç»ä¸ä¸ºäº†é€šè¿‡éªŒæ”¶è€Œéšç’æˆ–å¿½è§†è´¨é‡é—®é¢˜
- æˆ‘ç»ä¸é™ä½éªŒæ”¶æ ‡å‡†æˆ–è·³è¿‡é‡è¦çš„éªŒè¯é¡¹ç›®
- æˆ‘ç»ä¸ä¾èµ–ä¸»è§‚åˆ¤æ–­è¯„ä¼°è´¨é‡ï¼Œè€Œæ˜¯ä½¿ç”¨å®¢è§‚çš„æµ‹è¯•æ•°æ®
- å¦‚æœæˆ‘å‘ç°é˜»å¡æ€§é—®é¢˜ï¼Œæˆ‘å°†æ˜ç¡®æŠ¥å‘Šå¹¶å»ºè®®å»¶è¿Ÿå‘å¸ƒ
- æˆ‘ç»ä¸åœ¨ç³»ç»Ÿè´¨é‡ä¸è¾¾æ ‡çš„æƒ…å†µä¸‹ï¼Œç»™å‡ºå‘å¸ƒå»ºè®®

## è°ƒè¯•è§„èŒƒ
- é‡åˆ°éªŒæ”¶æµ‹è¯•å¤±è´¥æ—¶ï¼Œæˆ‘å°†ï¼š
  * è¯¦ç»†è®°å½•å¤±è´¥çš„å…·ä½“åœºæ™¯å’Œé”™è¯¯ä¿¡æ¯
  * åˆ†æé—®é¢˜çš„ä¸¥é‡ç¨‹åº¦å’Œå½±å“èŒƒå›´
  * è¯„ä¼°é—®é¢˜å¯¹ç”¨æˆ·ä½“éªŒå’Œå•†ä¸šç›®æ ‡çš„å½±å“
  * æä¾›å…·ä½“çš„ä¿®å¤å»ºè®®å’Œä¼˜å…ˆçº§
  * éªŒè¯ä¿®å¤åçš„ç³»ç»Ÿç¨³å®šæ€§
- å½“æˆ‘éœ€è¦è¯„ä¼°å‘å¸ƒé£é™©æ—¶ï¼Œæˆ‘å°†ï¼š
  * ç»¼åˆåˆ†ææ‰€æœ‰è´¨é‡æŒ‡æ ‡å’Œæµ‹è¯•ç»“æœ
  * è¯„ä¼°å·²çŸ¥é—®é¢˜çš„å¯æ¥å—æ€§å’Œç¼“è§£æªæ–½
  * è€ƒè™‘å¸‚åœºæ—¶æœºå’Œå•†ä¸šå½±å“
  * æä¾›åŸºäºæ•°æ®çš„å‘å¸ƒå»ºè®®

## æƒåˆ©
- æˆ‘æœ‰æƒåˆ©åœ¨ç³»ç»Ÿè´¨é‡ä¸è¾¾æ ‡æ—¶å¦å†³å‘å¸ƒ
- æˆ‘æœ‰æƒåˆ©åœ¨ç¬¦åˆè§„èŒƒçš„æƒ…å†µä¸‹ï¼Œå‘æŒ¥è‡ªèº«çš„èƒ½åŠ›ï¼Œè®©éªŒè¯æ›´åŠ ä¸¥æ ¼å’Œå…¨é¢

æˆ‘ç†è§£è¿™äº›è§„èŒƒçš„é‡è¦æ€§ï¼Œå¹¶æ‰¿è¯ºåœ¨æ•´ä¸ªä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸¥æ ¼éµå®ˆã€‚æˆ‘å°†åœ¨æ¯ä¸ªå…³é”®é˜¶æ®µåšå‡ºæ˜ç¡®å£°æ˜ï¼Œä»¥è¯æ˜æˆ‘å§‹ç»ˆéµå¾ªè§„èŒƒæ‰§è¡Œã€‚

---

## ä»»åŠ¡: å¤©åº­ç³»ç»Ÿæœ€ç»ˆéªŒè¯å’Œå‘å¸ƒå‡†å¤‡ï¼ˆæœ€ç»ˆéªŒè¯ä»»åŠ¡ï¼‰

**ç›®æ ‡(O)**:
- **åŠŸèƒ½ç›®æ ‡**:
  - å¯¹å¤©åº­MVPç³»ç»Ÿè¿›è¡Œå…¨é¢çš„æœ€ç»ˆéªŒè¯å’Œè´¨é‡æ£€æŸ¥
  - ç¡®ä¿ç³»ç»Ÿæ»¡è¶³æ‰€æœ‰ä¸šåŠ¡éœ€æ±‚å’ŒæŠ€æœ¯æŒ‡æ ‡
  - å‡†å¤‡ç³»ç»Ÿå‘å¸ƒæ–‡æ¡£å’Œéƒ¨ç½²é…ç½®
  - æä¾›å®Œæ•´çš„ç³»ç»Ÿäº¤ä»˜å’Œè¿ç»´æŒ‡å—

- **æ‰§è¡Œä»»åŠ¡**:
  - åˆ›å»ºæ–‡ä»¶:
    - `packages/validation/tests/acceptance/business_requirements.test.ts` - ä¸šåŠ¡éœ€æ±‚éªŒæ”¶æµ‹è¯•
    - `packages/validation/tests/acceptance/user_stories.test.ts` - ç”¨æˆ·æ•…äº‹éªŒæ”¶æµ‹è¯•
    - `packages/validation/tests/performance/load_test.yaml` - è´Ÿè½½æµ‹è¯•é…ç½®
    - `packages/validation/tests/security/security_scan.py` - å®‰å…¨æ‰«æè„šæœ¬
    - `packages/validation/scripts/system_health_check.sh` - ç³»ç»Ÿå¥åº·æ£€æŸ¥è„šæœ¬
    - `packages/validation/scripts/deployment_validation.sh` - éƒ¨ç½²éªŒè¯è„šæœ¬
    - `packages/validation/docs/system_validation_report.md` - ç³»ç»ŸéªŒè¯æŠ¥å‘Š
    - `packages/validation/docs/deployment_guide.md` - éƒ¨ç½²æŒ‡å—
    - `packages/validation/docs/operation_manual.md` - è¿ç»´æ‰‹å†Œ
    - `packages/validation/docs/user_manual.md` - ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ
    - `packages/validation/config/production.env` - ç”Ÿäº§ç¯å¢ƒé…ç½®
    - `packages/validation/docker/production.docker-compose.yml` - ç”Ÿäº§ç¯å¢ƒDockeré…ç½®
  - ä¿®æ”¹æ–‡ä»¶:
    - å„åŒ…çš„é…ç½®æ–‡ä»¶ - ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–
    - `README.md` - é¡¹ç›®æ€»ä½“è¯´æ˜
  - å®ç°åŠŸèƒ½:
    - ä¸šåŠ¡éœ€æ±‚å®Œæ•´æ€§éªŒè¯
    - ç³»ç»Ÿæ€§èƒ½å’Œç¨³å®šæ€§æµ‹è¯•
    - å®‰å…¨æ€§æ‰«æå’Œæ¼æ´æ£€æŸ¥
    - éƒ¨ç½²æµç¨‹éªŒè¯å’Œè‡ªåŠ¨åŒ–
    - æ–‡æ¡£å®Œæ•´æ€§æ£€æŸ¥

- **ä»»åŠ¡è¾¹ç•Œ**:
  - åŒ…å«ç³»ç»Ÿæœ€ç»ˆéªŒè¯ï¼Œä¸åŒ…å«å…·ä½“åŠŸèƒ½å¼€å‘
  - åŒ…å«éƒ¨ç½²å‡†å¤‡ï¼Œä¸åŒ…å«å®é™…ç”Ÿäº§éƒ¨ç½²
  - åŒ…å«æ–‡æ¡£ç¼–å†™ï¼Œä¸åŒ…å«åŸ¹è®­å®æ–½
  - ä¸“æ³¨äºè´¨é‡ä¿è¯ï¼Œä¸æ¶‰åŠåç»­è¿è¥

**ç¯å¢ƒ(E)**:
- **å‚è€ƒèµ„æº**:
  - `planning/user-stories-breakdown.md` - åŸå§‹ä¸šåŠ¡éœ€æ±‚
  - `docs/requirements-analysis.md` - éœ€æ±‚åˆ†ææ–‡æ¡£
  - `docs/user-journey-final.md` - ç”¨æˆ·ä½“éªŒè®¾è®¡
  - `development/architecture/technical-architecture.md` - æŠ€æœ¯æ¶æ„
  - æ‰€æœ‰åŒ…çš„ä»»åŠ¡æ–‡ä»¶ - äº†è§£å®ç°èŒƒå›´

- **ä¸Šä¸‹æ–‡ä¿¡æ¯**:
  - ä»»åŠ¡å®šä½ï¼švalidationåŒ…è´Ÿè´£æœ€ç»ˆè´¨é‡ä¿è¯å’Œå‘å¸ƒå‡†å¤‡
  - éªŒè¯èŒƒå›´ï¼šä¸šåŠ¡åŠŸèƒ½ + æŠ€æœ¯æ€§èƒ½ + ç”¨æˆ·ä½“éªŒ + éƒ¨ç½²è¿ç»´
  - è´¨é‡æ ‡å‡†ï¼šä¸šåŠ¡éœ€æ±‚100%æ»¡è¶³ + æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡ + å®‰å…¨æ€§åˆè§„
  - äº¤ä»˜ç›®æ ‡ï¼šå¯ç”Ÿäº§éƒ¨ç½²çš„å®Œæ•´ç³»ç»Ÿ + å®Œå¤‡çš„æ–‡æ¡£ä½“ç³»
  - åç»­æ”¯æŒï¼šä¸ºè¿è¥å›¢é˜Ÿæä¾›è¿ç»´æŒ‡å—å’Œé—®é¢˜æ’æŸ¥æ‰‹å†Œ

- **è§„èŒƒç´¢å¼•**:
  - è½¯ä»¶éªŒæ”¶æµ‹è¯•æœ€ä½³å®è·µ
  - ç³»ç»Ÿæ€§èƒ½æµ‹è¯•æ ‡å‡†
  - ç½‘ç»œå®‰å…¨åˆè§„è¦æ±‚
  - DevOpséƒ¨ç½²å’Œè¿ç»´æ ‡å‡†

- **æ³¨æ„äº‹é¡¹**:
  - éªŒæ”¶æµ‹è¯•å¿…é¡»åŸºäºåŸå§‹ä¸šåŠ¡éœ€æ±‚ï¼Œç¡®ä¿æ— é—æ¼
  - æ€§èƒ½æµ‹è¯•éœ€è¦æ¨¡æ‹ŸçœŸå®çš„ç”Ÿäº§ç¯å¢ƒè´Ÿè½½
  - å®‰å…¨æ‰«æå¿…é¡»æ¶µç›–OWASP Top 10å®‰å…¨é£é™©
  - éƒ¨ç½²æ–‡æ¡£å¿…é¡»è¯¦ç»†å¯æ“ä½œï¼Œæ”¯æŒè¿ç»´å›¢é˜Ÿç‹¬ç«‹æ“ä½œ

**å®ç°æŒ‡å¯¼(I)**:
- **ç®—æ³•ä¸æµç¨‹**:
  - éªŒæ”¶æµ‹è¯•æµç¨‹:
    ```
    éœ€æ±‚å¯¹æ¯” â†’ åŠŸèƒ½éªŒè¯ â†’ æ€§èƒ½æµ‹è¯• â†’ å®‰å…¨æ‰«æ â†’ éƒ¨ç½²éªŒè¯ â†’ æ–‡æ¡£å®¡æŸ¥ â†’ å‘å¸ƒå†³ç­–
    ```
  - è´¨é‡æ£€æŸ¥æµç¨‹:
    ```
    ä»£ç è´¨é‡ â†’ æµ‹è¯•è¦†ç›–ç‡ â†’ æ€§èƒ½åŸºå‡† â†’ å®‰å…¨åˆè§„ â†’ æ–‡æ¡£å®Œæ•´æ€§ â†’ ç”¨æˆ·ä½“éªŒ
    ```

- **æŠ€æœ¯é€‰å‹**:
  - éªŒæ”¶æµ‹è¯•ï¼šCucumber (BDDæµ‹è¯•æ¡†æ¶)
  - æ€§èƒ½æµ‹è¯•ï¼šK6 (ç°ä»£è´Ÿè½½æµ‹è¯•å·¥å…·)
  - å®‰å…¨æ‰«æï¼šOWASP ZAP + Bandit
  - éƒ¨ç½²å·¥å…·ï¼šDocker + Kubernetes (å®¹å™¨åŒ–éƒ¨ç½²)
  - ç›‘æ§å·¥å…·ï¼šPrometheus + Grafana + ELK Stack
  - æ–‡æ¡£å·¥å…·ï¼šGitBook (æ–‡æ¡£ç”Ÿæˆå’Œç®¡ç†)

- **ä»£ç æ¨¡å¼**:
  - ä¸šåŠ¡éœ€æ±‚éªŒæ”¶æµ‹è¯•:
    ```typescript
    import { Given, When, Then } from '@cucumber/cucumber';
    
    // US-001: ç”¨æˆ·éœ€æ±‚è¾“å…¥åŠŸèƒ½
    Given('ç”¨æˆ·è®¿é—®å¤©åº­ç³»ç»Ÿé¦–é¡µ', async () => {
      await page.goto('http://localhost:3001');
      await expect(page).toHaveTitle(/å¤©åº­ç³»ç»Ÿ/);
    });
    
    When('ç”¨æˆ·ç‚¹å‡»"å¼€å§‹è§„åˆ’é¡¹ç›®"æŒ‰é’®', async () => {
      await page.click('button:has-text("å¼€å§‹è§„åˆ’é¡¹ç›®")');
    });
    
    Then('ç³»ç»Ÿåº”è¯¥è·³è½¬åˆ°éœ€æ±‚è¾“å…¥é¡µé¢', async () => {
      await expect(page).toHaveURL(/.*\/requirement/);
      await expect(page.locator('textarea[placeholder*="è¯¦ç»†æè¿°"]')).toBeVisible();
    });
    
    When('ç”¨æˆ·è¾“å…¥è¯¦ç»†çš„é¡¹ç›®éœ€æ±‚æè¿°', async () => {
      const requirement = `
        å¼€å‘ä¸€ä¸ªåœ¨çº¿æ•™è‚²å¹³å°ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š
        1. ç”¨æˆ·ç®¡ç†ï¼šæ³¨å†Œã€ç™»å½•ã€ä¸ªäººèµ„æ–™ç®¡ç†
        2. è¯¾ç¨‹ç®¡ç†ï¼šæ•™å¸ˆåˆ›å»ºè¯¾ç¨‹ã€ä¸Šä¼ è§†é¢‘ã€ç®¡ç†å­¦å‘˜
        3. å­¦ä¹ åŠŸèƒ½ï¼šå­¦å‘˜è´­ä¹°è¯¾ç¨‹ã€è§‚çœ‹è§†é¢‘ã€å®Œæˆä½œä¸š
        4. æ”¯ä»˜ç³»ç»Ÿï¼šæ”¯æŒå¾®ä¿¡æ”¯ä»˜ã€æ”¯ä»˜å®æ”¯ä»˜
        5. ç®¡ç†åå°ï¼šè¶…çº§ç®¡ç†å‘˜ç®¡ç†å¹³å°æ•°æ®
        é¢„ç®—50ä¸‡ï¼Œæ—¶é—´3ä¸ªæœˆ
      `;
      
      await page.fill('textarea[placeholder*="è¯¦ç»†æè¿°"]', requirement);
    });
    
    When('ç”¨æˆ·æäº¤éœ€æ±‚', async () => {
      await page.click('button:has-text("å¼€å§‹è§„åˆ’é¡¹ç›®")');
    });
    
    Then('ç³»ç»Ÿåº”è¯¥å¼€å§‹è§£æéœ€æ±‚å¹¶æ˜¾ç¤ºè¿›åº¦', async () => {
      await expect(page.locator('text=æ­£åœ¨åˆ†æéœ€æ±‚')).toBeVisible();
      // éªŒè¯è¿›åº¦æŒ‡ç¤ºå™¨
      await expect(page.locator('[role="progressbar"]')).toBeVisible();
    });
    
    Then('ç³»ç»Ÿåº”è¯¥åœ¨30ç§’å†…å®Œæˆéœ€æ±‚è§£æ', async () => {
      await expect(page.locator('text=éœ€æ±‚è§£æå®Œæˆ')).toBeVisible({ timeout: 30000 });
    });
    
    Then('ç³»ç»Ÿåº”è¯¥è·³è½¬åˆ°é¡¹ç›®è§„åˆ’å±•ç¤ºé¡µé¢', async () => {
      await expect(page).toHaveURL(/.*\/project\/.+/);
      await expect(page.locator('h1:has-text("é¡¹ç›®è§„åˆ’")')).toBeVisible();
    });
    
    // US-002: é¡¹ç›®è§„åˆ’ç”ŸæˆåŠŸèƒ½
    Then('è§„åˆ’ç»“æœåº”è¯¥åŒ…å«é¡¹ç›®æ¦‚è¿°', async () => {
      await expect(page.locator('text=åœ¨çº¿æ•™è‚²å¹³å°')).toBeVisible();
      await expect(page.locator('text=é¡¹ç›®æ¦‚è¿°')).toBeVisible();
    });
    
    Then('è§„åˆ’ç»“æœåº”è¯¥åŒ…å«åŠŸèƒ½æ¨¡å—åˆ†è§£', async () => {
      await expect(page.locator('text=åŠŸèƒ½æ¨¡å—')).toBeVisible();
      await expect(page.locator('text=ç”¨æˆ·ç®¡ç†æ¨¡å—')).toBeVisible();
      await expect(page.locator('text=è¯¾ç¨‹ç®¡ç†æ¨¡å—')).toBeVisible();
      await expect(page.locator('text=æ”¯ä»˜ç³»ç»Ÿæ¨¡å—')).toBeVisible();
    });
    
    Then('è§„åˆ’ç»“æœåº”è¯¥åŒ…å«å¼€å‘é˜¶æ®µè§„åˆ’', async () => {
      await expect(page.locator('text=å¼€å‘é˜¶æ®µ')).toBeVisible();
      await expect(page.locator('text=ç¬¬ä¸€é˜¶æ®µ')).toBeVisible();
      await expect(page.locator('text=ç¬¬äºŒé˜¶æ®µ')).toBeVisible();
    });
    
    Then('è§„åˆ’ç»“æœåº”è¯¥åŒ…å«æ—¶é—´å’Œæˆæœ¬ä¼°ç®—', async () => {
      await expect(page.locator('text=é¢„è®¡å·¥æœŸ')).toBeVisible();
      await expect(page.locator('text=é¢„ç®—ä¼°ç®—')).toBeVisible();
      
      // éªŒè¯ä¼°ç®—åˆç†æ€§
      const budgetText = await page.locator('text=/é¢„ç®—.*[0-9]+.*ä¸‡/').textContent();
      expect(budgetText).toMatch(/[0-9]+.*ä¸‡/);
    });
    
    // US-003: è§„åˆ’ç»“æœå¯¼å‡ºåŠŸèƒ½
    When('ç”¨æˆ·ç‚¹å‡»"ä¸‹è½½è§„åˆ’"æŒ‰é’®', async () => {
      const downloadPromise = page.waitForEvent('download');
      await page.click('button:has-text("ä¸‹è½½è§„åˆ’")');
      const download = await downloadPromise;
      expect(download.suggestedFilename()).toMatch(/.*\.(pdf|docx)$/);
    });
    ```
  - æ€§èƒ½æµ‹è¯•é…ç½®:
    ```yaml
    # K6 è´Ÿè½½æµ‹è¯•é…ç½®
    scenarios:
      requirement_parsing_load:
        executor: ramping-vus
        startVUs: 1
        stages:
          - duration: 2m
            target: 10
          - duration: 5m
            target: 50
          - duration: 2m
            target: 0
        gracefulRampDown: 30s
    
    thresholds:
      http_req_duration:
        - p(95)<30000  # 95%çš„è¯·æ±‚å“åº”æ—¶é—´å°äº30ç§’
      http_req_failed:
        - rate<0.05    # é”™è¯¯ç‡å°äº5%
      http_reqs:
        - rate>1       # ååé‡å¤§äº1 req/s
    ```
  - ç³»ç»Ÿå¥åº·æ£€æŸ¥è„šæœ¬:
    ```bash
    #!/bin/bash
    
    echo "å¤©åº­ç³»ç»Ÿå¥åº·æ£€æŸ¥å¼€å§‹..."
    
    # æ£€æŸ¥æœåŠ¡çŠ¶æ€
    check_service() {
        local service_name=$1
        local service_url=$2
        local expected_status=${3:-200}
        
        echo "æ£€æŸ¥ $service_name æœåŠ¡..."
        
        response=$(curl -s -o /dev/null -w "%{http_code}" "$service_url")
        
        if [ "$response" = "$expected_status" ]; then
            echo "âœ… $service_name æœåŠ¡æ­£å¸¸ (HTTP $response)"
            return 0
        else
            echo "âŒ $service_name æœåŠ¡å¼‚å¸¸ (HTTP $response)"
            return 1
        fi
    }
    
    # æ£€æŸ¥æ•°æ®åº“è¿æ¥
    check_database() {
        echo "æ£€æŸ¥æ•°æ®åº“è¿æ¥..."
        
        if docker exec tianting-postgres psql -U postgres -d tianting_core_dev -c "SELECT 1;" > /dev/null 2>&1; then
            echo "âœ… æ•°æ®åº“è¿æ¥æ­£å¸¸"
            return 0
        else
            echo "âŒ æ•°æ®åº“è¿æ¥å¤±è´¥"
            return 1
        fi
    }
    
    # æ£€æŸ¥Redisè¿æ¥
    check_redis() {
        echo "æ£€æŸ¥Redisè¿æ¥..."
        
        if docker exec tianting-redis redis-cli ping | grep -q "PONG"; then
            echo "âœ… Redisè¿æ¥æ­£å¸¸"
            return 0
        else
            echo "âŒ Redisè¿æ¥å¤±è´¥"
            return 1
        fi
    }
    
    # æ‰§è¡Œå¥åº·æ£€æŸ¥
    health_status=0
    
    check_service "å‰ç«¯æœåŠ¡" "http://localhost:3001" || health_status=1
    check_service "APIæœåŠ¡" "http://localhost:8002/health" || health_status=1
    check_service "CoreæœåŠ¡" "http://localhost:8001/health" || health_status=1
    
    check_database || health_status=1
    check_redis || health_status=1
    
    # æ£€æŸ¥ç³»ç»Ÿèµ„æº
    echo "æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ..."
    
    cpu_usage=$(top -bn1 | grep "Cpu(s)" | awk '{print $2}' | cut -d'%' -f1)
    memory_usage=$(free | grep Mem | awk '{printf("%.1f", $3/$2 * 100.0)}')
    disk_usage=$(df -h / | tail -1 | awk '{print $5}' | cut -d'%' -f1)
    
    echo "CPUä½¿ç”¨ç‡: ${cpu_usage}%"
    echo "å†…å­˜ä½¿ç”¨ç‡: ${memory_usage}%"
    echo "ç£ç›˜ä½¿ç”¨ç‡: ${disk_usage}%"
    
    # èµ„æºä½¿ç”¨ç‡è­¦å‘Š
    if (( $(echo "$cpu_usage > 80" | bc -l) )); then
        echo "âš ï¸  CPUä½¿ç”¨ç‡è¿‡é«˜"
        health_status=1
    fi
    
    if (( $(echo "$memory_usage > 80" | bc -l) )); then
        echo "âš ï¸  å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜"
        health_status=1
    fi
    
    if [ "$disk_usage" -gt 80 ]; then
        echo "âš ï¸  ç£ç›˜ä½¿ç”¨ç‡è¿‡é«˜"
        health_status=1
    fi
    
    # æ€»ç»“
    if [ $health_status -eq 0 ]; then
        echo "ğŸ‰ ç³»ç»Ÿå¥åº·æ£€æŸ¥é€šè¿‡"
        exit 0
    else
        echo "ğŸ’¥ ç³»ç»Ÿå¥åº·æ£€æŸ¥å¤±è´¥"
        exit 1
    fi
    ```
  - å®‰å…¨æ‰«æè„šæœ¬:
    ```python
    import subprocess
    import json
    import sys
    from pathlib import Path
    
    class SecurityScanner:
        def __init__(self):
            self.results = {
                "dependency_scan": None,
                "code_scan": None,
                "web_scan": None,
                "container_scan": None
            }
        
        def scan_dependencies(self):
            """æ‰«æä¾èµ–æ¼æ´"""
            print("å¼€å§‹ä¾èµ–æ¼æ´æ‰«æ...")
            
            try:
                # Pythonä¾èµ–æ‰«æ
                result = subprocess.run([
                    "safety", "check", "--json"
                ], capture_output=True, text=True)
                
                if result.returncode == 0:
                    self.results["dependency_scan"] = {
                        "status": "pass",
                        "vulnerabilities": []
                    }
                else:
                    vulns = json.loads(result.stdout) if result.stdout else []
                    self.results["dependency_scan"] = {
                        "status": "fail",
                        "vulnerabilities": vulns
                    }
                
                # Node.jsä¾èµ–æ‰«æ
                subprocess.run([
                    "npm", "audit", "--audit-level", "moderate"
                ], check=True)
                
            except Exception as e:
                self.results["dependency_scan"] = {
                    "status": "error",
                    "error": str(e)
                }
        
        def scan_code(self):
            """é™æ€ä»£ç å®‰å…¨æ‰«æ"""
            print("å¼€å§‹é™æ€ä»£ç å®‰å…¨æ‰«æ...")
            
            try:
                # Pythonä»£ç æ‰«æ
                result = subprocess.run([
                    "bandit", "-r", "packages/", "-f", "json"
                ], capture_output=True, text=True)
                
                if result.stdout:
                    bandit_results = json.loads(result.stdout)
                    high_severity = [
                        issue for issue in bandit_results.get("results", [])
                        if issue.get("issue_severity") == "HIGH"
                    ]
                    
                    self.results["code_scan"] = {
                        "status": "pass" if not high_severity else "fail",
                        "high_severity_issues": high_severity
                    }
                
            except Exception as e:
                self.results["code_scan"] = {
                    "status": "error",
                    "error": str(e)
                }
        
        def scan_web_application(self):
            """Webåº”ç”¨å®‰å…¨æ‰«æ"""
            print("å¼€å§‹Webåº”ç”¨å®‰å…¨æ‰«æ...")
            
            try:
                # ä½¿ç”¨OWASP ZAPæ‰«æ
                result = subprocess.run([
                    "docker", "run", "-t", "owasp/zap2docker-stable",
                    "zap-baseline.py", "-t", "http://localhost:3001"
                ], capture_output=True, text=True)
                
                self.results["web_scan"] = {
                    "status": "pass" if result.returncode == 0 else "fail",
                    "output": result.stdout
                }
                
            except Exception as e:
                self.results["web_scan"] = {
                    "status": "error",
                    "error": str(e)
                }
        
        def scan_containers(self):
            """å®¹å™¨å®‰å…¨æ‰«æ"""
            print("å¼€å§‹å®¹å™¨å®‰å…¨æ‰«æ...")
            
            try:
                # æ‰«æDockeré•œåƒ
                images = ["tianting-frontend", "tianting-api", "tianting-core"]
                
                for image in images:
                    result = subprocess.run([
                        "docker", "run", "--rm", "-v", "/var/run/docker.sock:/var/run/docker.sock",
                        "aquasec/trivy", "image", image
                    ], capture_output=True, text=True)
                    
                    # è§£æç»“æœ
                    if "HIGH" in result.stdout or "CRITICAL" in result.stdout:
                        self.results["container_scan"] = {
                            "status": "fail",
                            "issues": f"å‘ç°é«˜å±æ¼æ´åœ¨é•œåƒ {image}"
                        }
                        return
                
                self.results["container_scan"] = {
                    "status": "pass",
                    "message": "æ‰€æœ‰å®¹å™¨é•œåƒå®‰å…¨"
                }
                
            except Exception as e:
                self.results["container_scan"] = {
                    "status": "error",
                    "error": str(e)
                }
        
        def generate_report(self):
            """ç”Ÿæˆå®‰å…¨æ‰«ææŠ¥å‘Š"""
            report = """
# å¤©åº­ç³»ç»Ÿå®‰å…¨æ‰«ææŠ¥å‘Š

## æ‰«ææ¦‚è¦
"""
            
            overall_status = "PASS"
            for scan_type, result in self.results.items():
                status = result.get("status", "unknown") if result else "not_run"
                report += f"- {scan_type}: {status.upper()}\n"
                
                if status == "fail":
                    overall_status = "FAIL"
            
            report += f"\n## æ€»ä½“çŠ¶æ€: {overall_status}\n"
            
            # è¯¦ç»†ç»“æœ
            for scan_type, result in self.results.items():
                if result and result.get("status") == "fail":
                    report += f"\n### {scan_type} è¯¦ç»†ç»“æœ\n"
                    if "vulnerabilities" in result:
                        for vuln in result["vulnerabilities"]:
                            report += f"- {vuln}\n"
                    elif "high_severity_issues" in result:
                        for issue in result["high_severity_issues"]:
                            report += f"- {issue.get('test_name', 'Unknown')}: {issue.get('issue_text', '')}\n"
            
            return report
        
        def run_all_scans(self):
            """è¿è¡Œæ‰€æœ‰å®‰å…¨æ‰«æ"""
            self.scan_dependencies()
            self.scan_code()
            self.scan_web_application()
            self.scan_containers()
            
            report = self.generate_report()
            
            # ä¿å­˜æŠ¥å‘Š
            with open("security_scan_report.md", "w", encoding="utf-8") as f:
                f.write(report)
            
            print(report)
            
            # æ£€æŸ¥æ˜¯å¦æœ‰å¤±è´¥çš„æ‰«æ
            failed_scans = [
                scan_type for scan_type, result in self.results.items()
                if result and result.get("status") == "fail"
            ]
            
            if failed_scans:
                print(f"å®‰å…¨æ‰«æå¤±è´¥: {', '.join(failed_scans)}")
                sys.exit(1)
            else:
                print("æ‰€æœ‰å®‰å…¨æ‰«æé€šè¿‡")
                sys.exit(0)
    
    if __name__ == "__main__":
        scanner = SecurityScanner()
        scanner.run_all_scans()
    ```

- **å®ç°ç­–ç•¥**:
  1. å»ºç«‹éªŒæ”¶æµ‹è¯•ç”¨ä¾‹å’ŒBDDæµ‹è¯•æ¡†æ¶
  2. å®ç°æ€§èƒ½æµ‹è¯•å’Œè´Ÿè½½æµ‹è¯•
  3. æ‰§è¡Œå®‰å…¨æ‰«æå’Œæ¼æ´æ£€æµ‹
  4. éªŒè¯éƒ¨ç½²æµç¨‹å’Œç¯å¢ƒé…ç½®
  5. ç¼–å†™å®Œæ•´çš„æ–‡æ¡£ä½“ç³»
  6. ç”Ÿæˆæœ€ç»ˆéªŒè¯æŠ¥å‘Š

- **è°ƒè¯•æŒ‡å—**:
  - éªŒè¯æµ‹è¯•è°ƒè¯•:
    ```bash
    # è¿è¡Œä¸šåŠ¡éœ€æ±‚éªŒæ”¶æµ‹è¯•
    npm run test:acceptance
    
    # è¿è¡Œæ€§èƒ½æµ‹è¯•
    k6 run packages/validation/tests/performance/load_test.js
    
    # è¿è¡Œå®‰å…¨æ‰«æ
    python packages/validation/tests/security/security_scan.py
    
    # ç³»ç»Ÿå¥åº·æ£€æŸ¥
    ./packages/validation/scripts/system_health_check.sh
    ```

**æˆåŠŸæ ‡å‡†(S)**:
- **åŸºç¡€è¾¾æ ‡**:
  - æ‰€æœ‰ä¸šåŠ¡éœ€æ±‚éªŒæ”¶æµ‹è¯•é€šè¿‡ï¼ŒåŠŸèƒ½å®Œæ•´æ€§100%
  - æ€§èƒ½æµ‹è¯•è¾¾æ ‡ï¼Œå“åº”æ—¶é—´å’Œååé‡æ»¡è¶³æŒ‡æ ‡
  - å®‰å…¨æ‰«æé€šè¿‡ï¼Œæ— é«˜å±æ¼æ´
  - éƒ¨ç½²éªŒè¯æˆåŠŸï¼Œç³»ç»Ÿå¯ç¨³å®šè¿è¡Œ
  - æ–‡æ¡£å®Œæ•´ï¼Œæ¶µç›–éƒ¨ç½²ã€è¿ç»´ã€ä½¿ç”¨æ‰‹å†Œ

- **é¢„æœŸå“è´¨**:
  - ç³»ç»Ÿç¨³å®šæ€§99.9%ï¼Œæ— å…³é”®åŠŸèƒ½ç¼ºé™·
  - æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡ï¼šéœ€æ±‚è§£æ<30ç§’ï¼ŒAPIå“åº”<100ms
  - å®‰å…¨æ€§åˆè§„ï¼Œé€šè¿‡OWASPå®‰å…¨æ‰«æ
  - éƒ¨ç½²è‡ªåŠ¨åŒ–ç¨‹åº¦â‰¥90%ï¼Œæ”¯æŒä¸€é”®éƒ¨ç½²
  - æ–‡æ¡£è´¨é‡ä¼˜ç§€ï¼Œä¾¿äºç”¨æˆ·å’Œè¿ç»´å›¢é˜Ÿä½¿ç”¨

- **å“è¶Šè¡¨ç°**:
  - å®ç°å…¨é¢çš„ç›‘æ§å’Œå‘Šè­¦ä½“ç³»
  - æ”¯æŒè“ç»¿éƒ¨ç½²å’Œç°åº¦å‘å¸ƒ
  - æä¾›å®Œæ•´çš„ç¾å¤‡å’Œæ¢å¤æ–¹æ¡ˆ
  - å®ç°æ™ºèƒ½çš„æ€§èƒ½ä¼˜åŒ–å’Œæ•…éšœè‡ªæ„ˆ
  - å»ºç«‹å®Œå–„çš„ç”¨æˆ·æ”¯æŒå’Œåé¦ˆä½“ç³»