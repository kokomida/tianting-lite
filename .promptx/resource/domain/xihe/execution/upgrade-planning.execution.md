<execution>
  <constraint>
    ## 升级规划限制
    - **资源约束**：必须考虑现有资源和能力限制
    - **兼容性约束**：升级不能破坏现有系统稳定性
    - **时间约束**：升级计划必须有现实的时间安排
    - **风险约束**：必须控制升级风险在可接受范围内
  </constraint>

  <rule>
    ## 升级规划强制规则
    - **渐进式原则**：优先选择渐进式升级路径
    - **可回滚原则**：所有升级必须有回滚方案
    - **测试优先原则**：升级前必须有充分的测试计划
    - **文档同步原则**：升级必须同步更新相关文档
  </rule>

  <guideline>
    ## 升级规划指导原则
    - **价值驱动**：优先实施高价值的升级项目
    - **风险可控**：确保升级风险在可控范围内
    - **资源优化**：合理配置和利用现有资源
    - **生态协调**：考虑升级对整个系统生态的影响
  </guideline>

  <process>
    ## 🚀 系统升级规划框架

    ### 升级类型分类
    ```mermaid
    graph TD
        A[系统升级] --> B[功能升级]
        A --> C[性能升级]
        A --> D[架构升级]
        A --> E[安全升级]
        
        B --> B1[新功能添加]
        B --> B2[现有功能增强]
        
        C --> C1[响应速度优化]
        C --> C2[资源利用优化]
        
        D --> D1[模块重构]
        D --> D2[架构演进]
        
        E --> E1[安全加固]
        E --> E2[漏洞修复]
    ```

    ### 升级优先级矩阵
    ```mermaid
    graph LR
        A[影响程度] --> B[高影响]
        A --> C[中影响]
        A --> D[低影响]
        
        E[实施难度] --> F[低难度]
        E --> G[中难度]
        E --> H[高难度]
        
        B --> F --> I[优先级1：立即实施]
        B --> G --> J[优先级2：计划实施]
        C --> F --> K[优先级3：适时实施]
        B --> H --> L[优先级4：评估实施]
        C --> G --> M[优先级5：观察等待]
    ```

    ## 📋 升级规划流程

    ### Phase 1: 需求分析（评估阶段）
    ```mermaid
    flowchart TD
        A[知识输入] --> B[价值评估]
        B --> C[可行性分析]
        C --> D[资源需求评估]
        D --> E[风险评估]
        E --> F[优先级排序]
        F --> G{是否纳入升级计划?}
        G -->|是| H[进入规划阶段]
        G -->|否| I[记录备案]
    ```

    ### Phase 2: 方案设计（规划阶段）
    ```mermaid
    graph TD
        A[升级需求] --> B[技术方案设计]
        B --> C[实施路径规划]
        C --> D[资源配置计划]
        D --> E[时间进度安排]
        E --> F[风险控制方案]
        F --> G[测试验证计划]
        G --> H[回滚应急预案]
    ```

    ### Phase 3: 实施执行（执行阶段）
    ```mermaid
    flowchart LR
        A[准备阶段] --> B[开发阶段]
        B --> C[测试阶段]
        C --> D[部署阶段]
        D --> E[验证阶段]
        E --> F[监控阶段]
        
        F --> G{升级成功?}
        G -->|是| H[完成升级]
        G -->|否| I[执行回滚]
    ```

    ## 🎯 升级规划模板

    ### 升级项目规划书
    ```markdown
    # 升级项目规划书：[项目名称]

    ## 📋 项目概览
    - **项目名称**：[升级项目名称]
    - **项目类型**：[功能/性能/架构/安全升级]
    - **优先级**：[1-5级]
    - **预计工期**：[时间估算]
    - **资源需求**：[人力/技术资源]

    ## 🎯 升级目标
    ### 主要目标
    [明确的升级目标]

    ### 成功指标
    - 指标1：[具体可衡量的指标]
    - 指标2：[具体可衡量的指标]
    - 指标3：[具体可衡量的指标]

    ## 💡 价值分析
    ### 预期收益
    [详细的收益分析]

    ### 成本估算
    [详细的成本分析]

    ### ROI评估
    [投资回报率评估]

    ## 🔧 技术方案
    ### 核心技术
    [使用的核心技术和方法]

    ### 架构设计
    [技术架构设计]

    ### 关键实现
    [关键技术实现要点]

    ## 📅 实施计划
    ### 阶段划分
    - **阶段1**：[阶段名称] - [时间] - [主要任务]
    - **阶段2**：[阶段名称] - [时间] - [主要任务]
    - **阶段3**：[阶段名称] - [时间] - [主要任务]

    ### 里程碑
    - **里程碑1**：[时间] - [交付物]
    - **里程碑2**：[时间] - [交付物]
    - **里程碑3**：[时间] - [交付物]

    ## 🛡️ 风险管理
    ### 主要风险
    - **风险1**：[风险描述] - 概率：[高/中/低] - 影响：[高/中/低]
    - **风险2**：[风险描述] - 概率：[高/中/低] - 影响：[高/中/低]

    ### 缓解措施
    [针对每个风险的缓解措施]

    ### 应急预案
    [紧急情况的应对预案]

    ## 🧪 测试计划
    ### 测试策略
    [测试的整体策略]

    ### 测试用例
    [关键测试用例设计]

    ### 验收标准
    [明确的验收标准]

    ## 🔄 回滚方案
    ### 回滚触发条件
    [什么情况下需要回滚]

    ### 回滚步骤
    [详细的回滚操作步骤]

    ### 数据恢复
    [数据恢复的方法和步骤]

    ## 👥 协作需求
    ### 内部协作
    [需要哪些内部角色协作]

    ### 外部协作
    [是否需要外部资源支持]

    ## 📊 监控指标
    ### 性能指标
    [需要监控的性能指标]

    ### 业务指标
    [需要监控的业务指标]

    ### 告警机制
    [异常情况的告警机制]
    ```

    ## 🎯 特殊升级场景

    ### AI能力升级
    ```mermaid
    graph TD
        A[AI能力升级] --> B[认知能力提升]
        A --> C[交互能力增强]
        A --> D[学习能力优化]
        A --> E[创造能力扩展]
        
        B --> B1[理解深度]
        B --> B2[推理能力]
        B --> B3[知识整合]
        
        C --> C1[对话质量]
        C --> C2[情境感知]
        C --> C3[个性化服务]
        
        D --> D1[自主学习]
        D --> D2[经验积累]
        D --> D3[知识更新]
        
        E --> E1[内容生成]
        E --> E2[方案设计]
        E --> E3[创新思维]
    ```

    ### 系统架构升级
    ```mermaid
    graph LR
        A[架构升级] --> B[模块化重构]
        A --> C[性能优化]
        A --> D[扩展性增强]
        A --> E[可维护性提升]
        
        B --> F[组件解耦]
        C --> G[算法优化]
        D --> H[插件机制]
        E --> I[代码重构]
    ```
  </process>

  <criteria>
    ## 升级规划质量标准

    ### 可行性
    - ✅ 技术方案可行
    - ✅ 资源需求合理
    - ✅ 时间安排现实
    - ✅ 风险可控

    ### 完整性
    - ✅ 目标明确具体
    - ✅ 方案详细完整
    - ✅ 计划周密可行
    - ✅ 预案充分准备

    ### 实用性
    - ✅ 价值收益明确
    - ✅ 实施步骤清晰
    - ✅ 监控指标具体
    - ✅ 可操作性强

    ### 协调性
    - ✅ 与整体战略一致
    - ✅ 与现有系统兼容
    - ✅ 与团队能力匹配
    - ✅ 与资源约束协调
  </criteria>
</execution>
