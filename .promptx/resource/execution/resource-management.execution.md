<execution>
  <constraint>
    ## 资源管理的技术约束
    - **物理限制**：硬件资源的物理上限（CPU核心、内存容量、磁盘空间）
    - **系统限制**：操作系统级别的资源限制（文件描述符、进程数、内存映射）
    - **网络限制**：带宽、延迟、连接数的网络物理限制
    - **外部依赖限制**：第三方服务的API限制、数据库连接数限制
    - **成本约束**：预算限制、资源使用成本控制
  </constraint>

  <rule>
    ## 资源管理强制规则
    - **资源获取**：所有资源使用必须通过统一的资源管理器获取
    - **资源释放**：使用完毕的资源必须及时正确释放
    - **资源监控**：所有资源使用情况必须被监控和记录
    - **配额控制**：不得超出分配的资源配额限制
    - **故障隔离**：资源问题不得影响其他无关组件
    - **优雅降级**：资源不足时必须有降级策略
  </rule>

  <guideline>
    ## 资源管理指导原则
    - **按需分配**：根据实际需求动态分配资源
    - **资源复用**：优先复用现有资源，避免重复创建
    - **公平调度**：确保资源分配的公平性
    - **预防为主**：提前识别和预防资源瓶颈
    - **监控驱动**：基于监控数据进行资源优化
    - **成本效益**：在性能和成本间找到平衡点
  </guideline>

  <process>
    ## 资源管理标准流程
    
    ### 阶段1：资源规划 (20%)
    ```mermaid
    flowchart TD
        A[需求分析] --> B[容量评估]
        B --> C[资源预算]
        C --> D[分配策略]
        D --> E[预留资源]
        E --> F[规划确认]
    ```
    
    #### 关键活动
    - **需求收集**：收集各组件的资源需求
    - **容量计算**：基于负载预测计算资源容量
    - **成本评估**：评估资源使用的成本
    - **分配设计**：设计资源分配和调度策略
    
    ### 阶段2：资源初始化 (15%)
    ```mermaid
    flowchart TD
        A[资源池创建] --> B[监控配置]
        B --> C[配额设置]
        C --> D[健康检查]
        D --> E[基线测试]
        E --> F[就绪确认]
    ```
    
    #### 关键组件
    - **资源池管理器**：统一的资源获取和释放接口
    - **配额控制器**：资源使用量的限制和监控
    - **健康检查器**：资源状态的持续监控
    - **调度器**：资源分配和负载均衡
    
    ### 阶段3：运行时管理 (50%)
    ```mermaid
    flowchart TD
        A[资源请求] --> B{资源可用?}
        B -->|是| C[分配资源]
        B -->|否| D[等待或降级]
        C --> E[使用监控]
        E --> F[使用完成]
        F --> G[资源释放]
        D --> H[重新评估]
        H --> B
    ```
    
    #### 运行时策略
    - **动态分配**：根据实时需求动态调整资源分配
    - **负载均衡**：在多个资源间均匀分配负载
    - **故障检测**：及时发现和处理资源故障
    - **自动恢复**：故障后的自动资源恢复
    
    ### 阶段4：优化调整 (15%)
    ```mermaid
    flowchart TD
        A[性能分析] --> B[瓶颈识别]
        B --> C[优化方案]
        C --> D[配置调整]
        D --> E[效果验证]
        E --> F[持续监控]
    ```
    
    #### 优化维度
    - **性能优化**：提升资源利用效率
    - **成本优化**：降低资源使用成本
    - **可靠性优化**：提高系统稳定性
    - **扩展性优化**：提升系统扩展能力
    
    ## 神庭资源管理协议
    
    ### 资源类型定义
    ```python
    class ResourceType(Enum):
        AGENT = "agent"           # AI智能体资源
        COMPUTE = "compute"       # 计算资源（CPU/内存）
        STORAGE = "storage"       # 存储资源
        NETWORK = "network"       # 网络资源
        EXTERNAL = "external"     # 外部服务资源
    ```
    
    ### 资源生命周期管理
    ```python
    class ResourceLifecycle:
        def allocate(self, resource_type: ResourceType, 
                    requirements: Dict) -> Resource
        def monitor(self, resource: Resource) -> ResourceMetrics
        def scale(self, resource: Resource, target: int) -> bool
        def release(self, resource: Resource) -> None
        def cleanup(self) -> None
    ```
    
    ### 资源调度接口
    ```python
    class ResourceScheduler:
        def schedule_task(self, task: Task, 
                         constraints: List[Constraint]) -> Resource
        def rebalance(self) -> None
        def get_utilization(self) -> Dict[ResourceType, float]
        def predict_capacity(self, time_horizon: int) -> Prediction
    ```
  </process>

  <criteria>
    ## 资源管理评价标准
    
    ### 效率指标
    - ✅ **资源利用率**：平均利用率保持在70-85%的最佳区间
    - ✅ **分配延迟**：资源分配响应时间<500ms
    - ✅ **调度成功率**：资源调度成功率>99%
    - ✅ **负载均衡度**：各资源间负载差异<15%
    
    ### 可靠性指标
    - ✅ **可用性**：资源服务可用性>99.9%
    - ✅ **故障恢复时间**：资源故障恢复时间<60秒
    - ✅ **数据完整性**：资源状态数据无丢失
    - ✅ **并发安全性**：并发资源操作无冲突
    
    ### 性能指标
    - ✅ **吞吐量**：资源分配吞吐量满足业务需求
    - ✅ **响应时间**：P99响应时间在SLA范围内
    - ✅ **扩展性**：支持10倍资源规模扩展
    - ✅ **预测准确性**：容量预测准确率>90%
    
    ### 成本指标
    - ✅ **成本效率**：单位性能成本优于基线20%
    - ✅ **资源浪费率**：闲置资源比例<10%
    - ✅ **成本可控性**：成本变化在预算范围内
    - ✅ **ROI**：资源投资回报率达到预期目标
  </criteria>
</execution>